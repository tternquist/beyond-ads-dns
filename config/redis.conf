# Redis configuration for beyond-ads-dns
# This file is mounted into the Redis container in docker-compose.yml

# Memory management
maxmemory 512mb
maxmemory-policy allkeys-lru

# Persistence (SSD-friendly: at most every 5 minutes)
# Save snapshot every 5 minutes if at least 1 key changed
save 300 1

# AOF disabled: DNS cache is ephemeral, repopulates quickly on restart
appendonly no

# Recommended for DNS caching:
# - allkeys-lru: Evict least recently used keys (recommended)
# - allkeys-lfu: Evict least frequently used keys
#
# Other policies available:
# - allkeys-random: Evict random keys
# - volatile-lru: Evict LRU keys with TTL set (not ideal for DNS cache)
# - volatile-lfu: Evict LFU keys with TTL set (not ideal for DNS cache)
# - volatile-random: Evict random keys with TTL set (not ideal for DNS cache)
# - volatile-ttl: Evict keys with shortest TTL (not ideal for DNS cache)
# - noeviction: Return errors when memory limit reached (not recommended)
#
# Note: DNS cache entries don't have Redis TTLs, so volatile-* policies
# will only evict metadata (hit counters, locks). Use allkeys-* policies
# to ensure cache entries can be evicted under memory pressure.
